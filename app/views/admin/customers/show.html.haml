- title "Dashboard"

.admin-customer-section
  .row
    .col-md-8
      .panel.panel-info
        .panel-heading
          %i.fa.fa-info
          Information
        .panel-body
          .container.customer-information
            = render partial: 'admin/customers/info'
          = link_to 'Edit', edit_admin_customer_path(@organization), class: 'btn btn-primary information-edit-dashboard'

      .container-fluid#dashboard-tabs
        .centered-tabs
          %ul.nav.nav-tabs#tickets-projects-audits-users-tabs
            %li{'class' => active_tab?('tickets')}
              %a{:href => '#tickets', 'data-toggle' => 'tab', 'data-name' => 'tickets'}
                = t(:tickets)
            %li{'class' => active_tab?('projects')}
              %a{:href => '#projects', 'data-toggle' => 'tab', 'data-name' => 'projects'}
                = t(:projects)
            %li{'class' => active_tab?('audits')}
              %a{:href => '#audits', 'data-toggle' => 'tab', 'data-name' => 'audits'}
                = t(:audits)
            %li{'class' => active_tab?('users')}
              %a{:href => '#users', 'data-toggle' => 'tab', 'data-name' => 'users'}
                = t(:users)

      .tab-content
        .tab-pane#tickets{'class' => active_tab?('tickets')}
          .panel.panel-info
            .panel-heading
              %i.fa.fa-tags
              Open Tickets
            .panel-body
              = render partial: 'admin/customers/tickets'


        .tab-pane#projects{'class' => active_tab?('projects')}
          .panel.panel-info
            .panel-heading
              %i.fa.fa-folder-o
              Cloud Projects
            .panel-body.panel-padding
              = render partial: 'admin/customers/projects', locals: {organization: @organization}

        .tab-pane#audits{'class' => active_tab?('audits')}
          .panel.panel-info
            .panel-heading
              %i.fa.fa-check-square-o
              Audits Logs
            .panel-body
              = render partial: "support/audits/audits", locals: {audits: @audits}
              - if @audits.any?
                = link_to 'See more', admin_audit_path(@organization)

        .tab-pane#users{'class' => active_tab?('users')}
          .panel.panel-info
            .panel-heading
              %i.fa.fa-user
              Users
            .panel-body.panel-padding
              = render partial: 'support/users/user_info', locals: {users: @users}

    .col-md-4
      %div.panel.panel-info
        .panel-heading
          %div#paying_and_account_type{style: "display: flex; justify-content: space-between;"}
            %div
              = form_for @organization, url: admin_customer_path(@organization), :remote => true, :html => {:role => 'form', :id => 'paying_form'} do |f|
                .form-group
                  = f.check_box :started_paying_at?, {:id=>"toggle-paying", class:'toggle', data: {:paying => @organization.paying?},
                                'data-toggle'=>"toggle", 'data-on'=>"Paying",
                                'data-off'=>"Not paying", 'data-size'=> "small", 'data-onstyle'=>"info", 'data-offstyle'=>"danger", 'data-style'=>"ios"}
            %div
              - unless @organization.staff?
                = form_for @organization, url: admin_account_migration_path(@organization), :remote => true, :html => {:role => 'form', :id => 'account_form'} do |f|
                  .form-group
                    = f.check_box :self_service?, {:id=>"toggle-account", class:'toggle', data: {:account => @organization.self_service},
                                  'data-toggle'=>"toggle", 'data-on'=>"Self-Service",
                                  'data-off'=>"Invoiced/Trial", 'data-size'=> "small", 'data-onstyle'=>"info", 'data-offstyle'=>"primary", 'data-style'=>"ios"}

        .panel-body.panel-padding
          = render partial: 'admin/customers/states'

      .panel.panel-info
        .panel-heading
          %i.fa.fa-area-chart
          Usage
        .panel-body.panel-padding
          = render partial: 'admin/customers/usage'

      .panel.panel-info
        .panel-heading
          %i.fa.fa-pie-chart
          Manage Customer Quotas
        .panel-body.panel-padding
          = link_to 'Edit Quotas', edit_admin_quota_path(@organization), class: 'btn btn-primary'
